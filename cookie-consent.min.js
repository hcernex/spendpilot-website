const CookieConsent={cookieName:"spendpilot_cookie_consent",cookieExpireDays:365,translations:{fr:{title:"Nous respectons votre vie privee",description:"Ce site utilise des cookies pour ameliorer votre experience. Les cookies essentiels sont necessaires au fonctionnement du site. Les cookies analytiques nous aident a comprendre comment vous utilisez le site.",acceptAll:"Accepter tout",acceptEssential:"Essentiels uniquement",customize:"Personnaliser",save:"Enregistrer mes choix",essentialTitle:"Cookies essentiels",essentialDesc:"Necessaires au fonctionnement du site (preferences, theme).",analyticsTitle:"Cookies analytiques",analyticsDesc:"Nous aident a comprendre comment vous utilisez le site.",always:"Toujours actif"},en:{title:"We respect your privacy",description:"This site uses cookies to improve your experience. Essential cookies are necessary for the site to function. Analytics cookies help us understand how you use the site.",acceptAll:"Accept all",acceptEssential:"Essential only",customize:"Customize",save:"Save my choices",essentialTitle:"Essential cookies",essentialDesc:"Necessary for the site to function (preferences, theme).",analyticsTitle:"Analytics cookies",analyticsDesc:"Help us understand how you use the site.",always:"Always active"}},getLang:()=>localStorage.getItem("language")||(navigator.language.startsWith("fr")?"fr":"en"),t(e){const t=this.getLang();return this.translations[t][e]||this.translations.en[e]},hasConsent(){return null!==this.getCookie(this.cookieName)},getConsent(){const e=this.getCookie(this.cookieName);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},setConsent(e){const t=JSON.stringify(e);this.setCookie(this.cookieName,t,this.cookieExpireDays),this.hideBanner(),this.applyConsent(e)},applyConsent(e){e.analytics&&console.log("Analytics cookies accepted")},setCookie(e,t,s){const n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};expires=${n.toUTCString()};path=/;SameSite=Lax;Secure`},getCookie(e){const t=e+"=",s=document.cookie.split(";");for(let e=0;e<s.length;e++){let n=s[e].trim();if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length))}return null},createBanner(){const e=document.createElement("div");e.id="cookie-consent-banner",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","cookie-title"),e.setAttribute("aria-describedby","cookie-desc"),e.innerHTML=`\n            <div class="cookie-consent-container">\n                <div class="cookie-consent-content">\n                    <h2 id="cookie-title" class="cookie-consent-title">${this.t("title")}</h2>\n                    <p id="cookie-desc" class="cookie-consent-desc">${this.t("description")}</p>\n\n                    <div class="cookie-consent-options" id="cookie-options" style="display: none;">\n                        <div class="cookie-option">\n                            <div class="cookie-option-header">\n                                <span class="cookie-option-title">${this.t("essentialTitle")}</span>\n                                <span class="cookie-option-always">${this.t("always")}</span>\n                            </div>\n                            <p class="cookie-option-desc">${this.t("essentialDesc")}</p>\n                        </div>\n                        <div class="cookie-option">\n                            <div class="cookie-option-header">\n                                <label class="cookie-option-title" for="analytics-toggle">${this.t("analyticsTitle")}</label>\n                                <label class="cookie-toggle">\n                                    <input type="checkbox" id="analytics-toggle" checked>\n                                    <span class="cookie-toggle-slider"></span>\n                                </label>\n                            </div>\n                            <p class="cookie-option-desc">${this.t("analyticsDesc")}</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="cookie-consent-actions">\n                    <button type="button" class="cookie-btn cookie-btn-secondary" id="cookie-customize">\n                        ${this.t("customize")}\n                    </button>\n                    <button type="button" class="cookie-btn cookie-btn-secondary" id="cookie-essential">\n                        ${this.t("acceptEssential")}\n                    </button>\n                    <button type="button" class="cookie-btn cookie-btn-primary" id="cookie-accept">\n                        ${this.t("acceptAll")}\n                    </button>\n                </div>\n            </div>\n        `,document.body.appendChild(e),this.attachEvents()},attachEvents(){document.getElementById("cookie-accept").addEventListener("click",()=>{this.setConsent({essential:!0,analytics:!0})}),document.getElementById("cookie-essential").addEventListener("click",()=>{this.setConsent({essential:!0,analytics:!1})}),document.getElementById("cookie-customize").addEventListener("click",()=>{const e=document.getElementById("cookie-options"),t=document.getElementById("cookie-customize"),s="none"!==e.style.display;if(e.style.display=s?"none":"block",t.textContent=s?this.t("customize"):this.t("save"),s){const e=document.getElementById("analytics-toggle").checked;this.setConsent({essential:!0,analytics:e})}})},hideBanner(){const e=document.getElementById("cookie-consent-banner");e&&(e.classList.add("cookie-consent-hidden"),setTimeout(()=>e.remove(),300))},init(){if(this.hasConsent()){const e=this.getConsent();e&&this.applyConsent(e)}else"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.createBanner()):this.createBanner()}};CookieConsent.init();